<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Clan War Time Advisor</title>
<style>
  body { font-family: Arial, sans-serif; background: #121212; color: #f0f0f0; text-align: center; padding: 2rem; }
  h1 { color: #ffd700; }
  label, input, button { margin: 0.5rem; font-size: 1rem; }
  .result { margin-top: 2rem; font-size: 1.2rem; }
  .best { color: #00ff88; }
  .avoid { color: #ff5555; }
</style>
</head>
<body>
<h1>Clan War Time Advisor</h1>
<p>Type your city or time zone to see the best times to attack and when to avoid, based on Europe & Middle East peak hours.</p>
<label for="tz">City/Timezone:</label>
<input id="tz" type="text" placeholder="e.g. America/Edmonton">
<button onclick="advise()">Get Times</button>
<div class="result" id="output"></div>
<script>
function advise(){
  const tz = document.getElementById('tz').value || Intl.DateTimeFormat().resolvedOptions().timeZone;

  // Europe & Middle East evening peak hours in UTC
  const peakStartUTC = 16; // 4 PM UTC
  const peakEndUTC = 21;   // 9 PM UTC

  function utcToLocal(utcHour){
    const now = new Date();
    now.setUTCHours(utcHour, 0, 0, 0);
    return new Date(now.toLocaleString('en-US', { timeZone: tz }));
  }

  const localPeakStart = utcToLocal(peakStartUTC);
  const localPeakEnd = utcToLocal(peakEndUTC);

  // Best evening: 1–3 hours after peak ends
  let eveningBestStart = new Date(localPeakEnd);
  eveningBestStart.setHours(localPeakEnd.getHours() + 1);
  let eveningBestEnd = new Date(eveningBestStart);
  eveningBestEnd.setHours(eveningBestStart.getHours() + 2);

  // Best morning: 4–2 hours before peak starts
  let morningBestStart = new Date(localPeakStart);
  morningBestStart.setHours(localPeakStart.getHours() - 4);
  let morningBestEnd = new Date(morningBestStart);
  morningBestEnd.setHours(morningBestStart.getHours() + 2);

  function fmt(t){ return t.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'}); }

  document.getElementById('output').innerHTML = `
    <div class='best'>Evening Best: ${fmt(eveningBestStart)} – ${fmt(eveningBestEnd)}</div>
    <div class='best'>Morning Best: ${fmt(morningBestStart)} – ${fmt(morningBestEnd)}</div>
    <div class='avoid'>Avoid: ${fmt(localPeakStart)} – ${fmt(localPeakEnd)}</div>
  `;
}
</script>
</body>
</html>
