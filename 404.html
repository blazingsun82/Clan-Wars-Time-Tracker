<!-- Edmontonation — War Time Advisor (simplified and cleaner) -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Edmontonation — War Time Advisor</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; background: #0b0f19; color: #fff; text-align: center; }
  .banner { background: linear-gradient(90deg,#86198f,#7c3aed,#06b6d4); padding: 20px; font-size: 2.5rem; font-weight: bold; }
  .elder { font-size: 1.2rem; margin-top: 5px; }
  .bar { margin: 20px auto; max-width: 600px; }
  input, button { padding: 10px; margin: 5px; border-radius: 8px; border: none; }
  .cards { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 20px; }
  .card { background: #12172a; padding: 15px; border-radius: 12px; width: 200px; }
  .ok { color: #22c55e; font-weight: bold; }
  .avoid { color: #ef4444; font-weight: bold; }
  .ticker-wrap { background: #1a1030; padding: 10px; position: fixed; bottom: 0; left: 0; right: 0; }
  .ticker-line { animation: ticker 18s linear infinite; white-space: nowrap; display: inline-block; }
  @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
</style>
</head>
<body>
  <div class="banner">EDMONTONATION<div class="elder">Elder Bar: 2500 medals</div></div>
  <div class="bar">
    <input id="where" placeholder="Enter city or timezone" />
    <button id="useDevice">Use my timezone</button>
    <button id="go">Get times</button>
  </div>
  <div style="font-size:1.5rem; margin-bottom:10px;">Clan War Time Advisor</div>
  <div class="cards">
    <div class="card"><div>Evening — Best</div><div class="ok" id="eveningBest">–</div></div>
    <div class="card"><div>Morning — Best</div><div class="ok" id="morningBest">–</div></div>
    <div class="card"><div>Avoid</div><div class="avoid" id="avoidWin">–</div></div>
  </div>
  <div class="ticker-wrap"><span class="ticker-line" id="tickerLine"></span></div>
<script>
const CITY_TZ = { "edmonton":"America/Edmonton","calgary":"America/Edmonton","vancouver":"America/Los_Angeles","toronto":"America/Toronto","london":"Europe/London","berlin":"Europe/Berlin","riyadh":"Asia/Riyadh" };
function utcHourToLocalRange(tz, startUTC, endUTC){ const base = new Date(); const s = new Date(Date.UTC(base.getUTCFullYear(), base.getUTCMonth(), base.getUTCDate(), startUTC)); const e = new Date(Date.UTC(base.getUTCFullYear(), base.getUTCMonth(), base.getUTCDate(), endUTC)); const sLocal = new Date(s.toLocaleString('en-US', { timeZone: tz })); const eLocal = new Date(e.toLocaleString('en-US', { timeZone: tz })); return [sLocal, eLocal]; }
function fmt(t){ return t.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}); }
function resolveTZ(input){ const key = input.trim().toLowerCase(); if(CITY_TZ[key]) return CITY_TZ[key]; return input; }
const PEAK_START_UTC = 16, PEAK_END_UTC = 21;
function compute(tz){ const [ps, pe] = utcHourToLocalRange(tz, PEAK_START_UTC, PEAK_END_UTC); const eveS = new Date(pe); eveS.setHours(eveS.getHours()+1); const eveE = new Date(eveS); eveE.setHours(eveE.getHours()+2); const mornS = new Date(ps); mornS.setHours(mornS.getHours()-4); const mornE = new Date(mornS); mornE.setHours(mornE.getHours()+2); return { eveningBest: `${fmt(eveS)} – ${fmt(eveE)}`, morningBest: `${fmt(mornS)} – ${fmt(mornE)}`, avoid: `${fmt(ps)} – ${fmt(pe)}` }; }
function show(t){ document.getElementById('eveningBest').textContent=t.eveningBest; document.getElementById('morningBest').textContent=t.morningBest; document.getElementById('avoidWin').textContent=t.avoid; }
document.getElementById('useDevice').onclick=()=>{ document.getElementById('where').value = Intl.DateTimeFormat().resolvedOptions().timeZone; };
document.getElementById('go').onclick=()=>{ const tz = resolveTZ(document.getElementById('where').value || Intl.DateTimeFormat().resolvedOptions().timeZone); try{ show(compute(tz)); }catch{ alert('Invalid timezone'); } };
(function init(){ const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'America/Edmonton'; document.getElementById('where').value=tz; show(compute(tz)); })();
const ADULT_BANTER = ["By doing your war attacks you build confidence — and confidence attracts hot girls.","Doing your war attacks helps build wealth and can increase your sex drive.","Real Elders finish their war attacks before breakfast.","War medals today, bragging rights tonight."];
let idx = 0; function rotateTicker(){ document.getElementById('tickerLine').textContent = ADULT_BANTER[idx++ % ADULT_BANTER.length]; }
rotateTicker(); setInterval(rotateTicker, 9000);
</script>
</body>
</html>
